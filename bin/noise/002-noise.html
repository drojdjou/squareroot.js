<!DOCTYPE html>
<html>
<head>
    <title>Perlin Noise | v0.1</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable = no">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">

    <style type="text/css">

        body {
            background-color: #000000;
        }

        canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

    </style>

<!-- SQRLIB -->
<!-- Auto-generated by tools/demojstags.py. Do not edit this section -->
<script type="text/javascript" src="../../src/requestAnimFrame.js"></script>
<script type="text/javascript" src="../../src/SQR.js"></script>
<script type="text/javascript" src="../../src/sqr/Squareroot.js"></script>
<script type="text/javascript" src="../../src/sqr/SquarerootGL.js"></script>
<script type="text/javascript" src="../../src/sqr/Transform.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Cube.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Plane.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Quad.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Sprite2D.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Sprite3D.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Triangle.js"></script>
<script type="text/javascript" src="../../src/sqr/geometry/Tube.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Interpolation.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Mathx.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix2D.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix33.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Matrix44.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Noise.js"></script>
<script type="text/javascript" src="../../src/sqr/math/PerlinNoise.js"></script>
<script type="text/javascript" src="../../src/sqr/math/ProjectionMatrix.js"></script>
<script type="text/javascript" src="../../src/sqr/math/QuadraticBezier.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Quaternion.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Spline.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Spring.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Vector2.js"></script>
<script type="text/javascript" src="../../src/sqr/math/Vector3.js"></script>
<script type="text/javascript" src="../../src/sqr/math/VectorUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/physics/CSSCollider.js"></script>
<script type="text/javascript" src="../../src/sqr/physics/Particle.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement2D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/DOMElement3D.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Point.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Polygon.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/Segment.js"></script>
<script type="text/javascript" src="../../src/sqr/renderers/WebGL.js"></script>
<script type="text/javascript" src="../../src/sqr/util/CanvasUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Color.js"></script>
<script type="text/javascript" src="../../src/sqr/util/DOMUtil.js"></script>
<script type="text/javascript" src="../../src/sqr/util/GL.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Interactor.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Loader.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Shader.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Stringify.js"></script>
<script type="text/javascript" src="../../src/sqr/util/Time.js"></script>
<!-- SQRLIB -->

    <script type="text/javascript">

        window.onload = function() {

            var cnv = document.getElementById('canvas');

            var resolution = 4;

            cnv.width = window.innerWidth / resolution;
            cnv.height = window.innerHeight / resolution;

            console.log(cnv.width, cnv.height);

            var szx = cnv.width;
            var szy = cnv.height;

            var ctx = cnv.getContext('2d');
            // ctx.webkitImageSmoothingEnabled = false; // Does it even do anything?

            var dta = ctx.createImageData(szx, szy);
            var nsz = new ImprovedNoise();

            var n1 = 0, n2 = 0, n3 = 100000;

            function drawNoise() {
                requestAnimFrame(drawNoise);


                for (var i = 0; i < szy; i++) {
                    for (var j = 0; j < szx; j++) {

                        var c1 = nsz.noise((i) / 8, (n1 + j) / 8, 0);
                        c1 = (c1 + 1) / 2;

                        var c2 = nsz.noise((n2 + i) / 24, (n2 + j) / 24, 0);
                        c2 = (c2 + 1) / 2;

                        var c3 = nsz.noise((n3 + i) / 64, (j) / 64, 0);
                        c3 = (c3 + 1) / 2;

                        var cp = (c1 * 1 + c2 * 2 + c3  * 4) / 4;

                        var cr = cp * 64;
                        var cg = 0 + cp * 127;
                        var cb = 0 + cp * 255;

                        dta.data[i * 4 * szx + j * 4 + 0] = cr;
                        dta.data[i * 4 * szx + j * 4 + 1] = cg;
                        dta.data[i * 4 * szx + j * 4 + 2] = cb;
                        dta.data[i * 4 * szx + j * 4 + 3] = 255;
                    }
                }

                ctx.putImageData(dta, 0, 0);

                n1 += 0.2;
                n2 += 0.4;
                n3 -= 0.8;
            }

            drawNoise();

        }

    </script>

</head>
<body>
<canvas id="canvas"></canvas>
</body>
</html>